# ğŸ  VideoLingo æœ¬åœ°éƒ¨ç½²æŒ‡å—

VideoLingo è¯­éŸ³è¯†åˆ«æ–‡æœ¬æ­¥éª¤æä¾›å¤šç§ Whisper æ–¹æ¡ˆçš„é€‰æ‹©ï¼ˆå› ä¸ºç›®å‰ä¸ºæ­¢æ²¡æœ‰å”¯ä¸€å®Œç¾çš„é€‰æ‹©ï¼‰ï¼Œæ ¹æ®ä¸ªäººé…ç½®å’Œéœ€æ±‚é€‰æ‹©ä¸€ä¸ªå³å¯ã€‚

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|:-----|:-----|:-----|
| **whisper_timestamped** | â€¢ æœ¬åœ°è¿è¡Œ<br>â€¢ å®‰è£…ç®€ä¾¿<br>â€¢ ä½¿ç”¨åŸç”Ÿ Whisper æ¨¡å‹ | â€¢ ä»…è‹±æ–‡æ•ˆæœç†æƒ³<br>â€¢ éœ€è¦8Gä»¥ä¸Šæ˜¾å­˜çš„æ˜¾å¡ |
| **whisperX**  | â€¢ æœ¬åœ°è¿è¡Œ<br>â€¢ åŸºäº faster-whisperï¼Œæ€§èƒ½å“è¶Š<br>â€¢ å¤šè¯­è¨€æ”¯æŒå¥½ | â€¢ éœ€å®‰è£… CUDA å’Œ cuDNN<br>â€¢ å„è¯­è¨€éœ€å•ç‹¬ä¸‹è½½ wav2vec æ¨¡å‹<br>â€¢ éœ€è¦8Gä»¥ä¸Šæ˜¾å­˜çš„æ˜¾å¡ |
| **whisperX_api** (ğŸŒŸæ¨è) | â€¢ åˆ©ç”¨ Replicate APIï¼Œæ— éœ€æœ¬åœ°ç®—åŠ› | â€¢ Replicate æœåŠ¡å¯èƒ½ä¸ç¨³å®š å¶å‘ CUDA é”™è¯¯<br>â€¢ ä½¿ç”¨çš„large-v3 æ ‡ç‚¹æ•ˆæœå¯èƒ½ä¸å¦‚v2 |

## ğŸ“‹ å‰æœŸå‡†å¤‡

1. è·å– `claude-3-5-sonnet` çš„ `API_KEY`ï¼Œæ¨èä¾¿å®œæ¸ é“ï¼š[äº‘é›¾API](https://api2.wlai.vip/register?aff=TXMB)ï¼Œä»…ä»… ï¿¥35/1Mï¼Œå®˜æ–¹ä»·æ ¼çš„ 1/3ã€‚å½“ç„¶è¿™ä¸€æ­¥ä½ ä¹Ÿå¯ä»¥æ¢æˆåˆ«çš„apiæä¾›å•†ï¼Œä½†ä»…ä»…å»ºè®®é€‰ç”¨ `claude-3-5-sonnet` > `Qwen 1.5 72B Chat` > `deepseek-coder`
 
   ![yunwu](https://github.com/user-attachments/assets/7aabfa87-06b5-4004-8d9e-fa4a0743a912)

2. è‹¥é€‰ç”¨ `whisperX_api`ï¼Œè¯·åœ¨ [Replicateå®˜ç½‘](https://replicate.com/account/api-tokens) æ³¨å†Œå¹¶ç»‘å®šæ”¯ä»˜æ–¹å¼ï¼Œè·å–ä½ çš„ä»¤ç‰Œã€‚ä¹Ÿå¯åœ¨ QQ ç¾¤è”ç³»æˆ‘å…è´¹æä¾›æµ‹è¯•ç”¨ã€‚

## ğŸ’¾ ä¸€é”®åŒ…ä¸‹è½½

å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨å®‰è£…,æˆ‘ä»¬ä¹Ÿæä¾›äº† `whisperX_api` ç‰ˆæœ¬çš„ Windows ä¸€é”®æ•´åˆåŒ…:

1. ä¸‹è½½ `v0.6.1` ä¸€é”®æ•´åˆåŒ…(600M): [ç›´è¾¾é“¾æ¥](https://vip.123pan.cn/1817874751/7989695) | [åº¦ç›˜å¤‡ç”¨](https://pan.baidu.com/s/1H_3PthZ3R3NsjS0vrymimg?pwd=ra64)

2. è§£å‹ä¸‹è½½çš„å‹ç¼©æ–‡ä»¶åˆ°æƒ³è¦çš„ä½ç½®

3. åŒå‡»è¿è¡Œè§£å‹åæ–‡ä»¶å¤¹ä¸­çš„ `ä¸€é”®å¯åŠ¨.bat`

4. åœ¨æ‰“å¼€çš„æµè§ˆå™¨çª—å£ä¸­,æŒ‰ç…§ç•Œé¢æç¤ºè¿›è¡Œé…ç½®å’Œä½¿ç”¨

> æç¤º: ç½‘é¡µä¸­é…ç½® key çš„è¿‡ç¨‹å‚è€ƒæœ€ä¸‹æ–¹å›¾ç‰‡

## ğŸ› ï¸ æ‰‹åŠ¨å®‰è£…æµç¨‹ (Windows)

### å‰ç½®ä¾èµ–

åœ¨å¼€å§‹å®‰è£… VideoLingo ä¹‹å‰ï¼Œæ³¨æ„é¢„ç•™è‡³å°‘ **20G** ç¡¬ç›˜ç©ºé—´ï¼Œå¹¶è¯·ç¡®ä¿å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

1. å®‰è£… [Anaconda](https://www.anaconda.com/download/success)
   - ä¸€å®šè¦åœ¨å®‰è£…è¿‡ç¨‹ä¸­å‹¾é€‰ æ·»åŠ åˆ°ç¯å¢ƒå˜é‡

2. å®‰è£… [Git](https://git-scm.com/download/win)

3. å¯¹äºé€‰æ‹© `whisperX` çš„ç”¨æˆ·ï¼š
   - å®‰è£… [Cuda Toolkit](https://developer.download.nvidia.com/compute/cuda/12.6.0/local_installers/cuda_12.6.0_560.76_windows.exe)
   - å®‰è£… [Cudnn](https://developer.download.nvidia.com/compute/cudnn/9.3.0/local_installers/cudnn_9.3.0_windows.exe)
   - å®Œæˆå®‰è£…åé‡å¯è®¡ç®—æœº
   > tips: å¦‚æœåœ¨åç»­è¿è¡Œä¸­æŠ¥é”™ CUDA Memory, è¯·è‡ªè¡Œåœ¨ ``core/all_whisper_methods/whisperX.py` ä¸­è°ƒå° batch size é‡è¯•
4. å¯¹äºé€‰æ‹© `whisper_timestamped` çš„ç”¨æˆ·ï¼š
   - å®‰è£… [Visual Studio 2022](https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=Community&channel=Release&version=VS2022&source=VSLandingPage&cid=2030&passive=false)
     - åœ¨å®‰è£…ç•Œé¢å‹¾é€‰"ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘"ç»„ä»¶åŒ…
   - å®‰è£… [CMake](https://github.com/Kitware/CMake/releases/download/v3.30.2/cmake-3.30.2-windows-x86_64.msi)

### å®‰è£…æ­¥éª¤
> é‡åˆ°é—®é¢˜å¯ä»¥æŠŠæ•´ä¸ªæ­¥éª¤ä¸¢ç»™ GPT é—®é—®~
1. æ‰“å¼€ Anaconda Powershell Prompt å¹¶åˆ‡æ¢åˆ°æ¡Œé¢ç›®å½•ï¼š
   ```bash
   cd desktop
   ```

2. å…‹éš†é¡¹ç›®ï¼š
   ```bash
   git clone https://github.com/Huanshere/VideoLingo.git
   cd VideoLingo
   ```

3. é…ç½®è™šæ‹Ÿç¯å¢ƒï¼š
   ```bash
   conda create -n videolingo python=3.10.0
   conda activate videolingo
   ```

4. è¿è¡Œå®‰è£…è„šæœ¬ï¼š
   ```bash
   python install.py
   ```
   æ ¹æ®æç¤ºé€‰æ‹©æ‰€éœ€çš„ Whisper é¡¹ç›®ï¼Œè„šæœ¬å°†è‡ªåŠ¨å®‰è£…ç›¸åº”çš„ torch å’Œ whisper ç‰ˆæœ¬

   è¯·ç¡®ä¿ç½‘ç»œè¿æ¥ï¼Œå¹¶æ£€æŸ¥å®‰è£…è¿‡ç¨‹æ˜¯å¦æœ‰æŠ¥é”™

5. ğŸ‰ å¯åŠ¨ Streamlit åº”ç”¨ï¼š
   ```bash
   streamlit run st.py
   ```

6. åœ¨å¼¹å‡ºç½‘é¡µçš„ä¾§è¾¹æ ä¸­è®¾ç½®keyï¼Œå¹¶æ³¨æ„é€‰æ‹©whisperæ–¹æ³•

   ![2](https://github.com/user-attachments/assets/ba5621f0-8320-4a45-8da8-9ea574b5c7cc)


## Dockerä¸€é”®éƒ¨ç½²

æ‹‰å–é•œåƒï¼š

```bash
docker pull sguann/videolingo_app:latest
```

è¿è¡Œé•œåƒï¼š
```bash
docker run -d -p 8501:8501 -e API_KEY=xxx -e BASE_URL=xxx -e WHISPER_METHOD=xxx -e DISPLAY_LANGUAGE=xxx sguann/videolingo_app:latest
```

å…¶ä¸­:

 - `API_KEY` è®¿é—®token,éœ€è¦è‡ªè¡Œç”³è¯·,æ¨è[äº‘é›¾API](https://api2.wlai.vip/register?aff=TXMB)
 - `BASE_URL` APIæä¾›å•†æ¥å£ï¼Œä¸éœ€è¦v1åç¼€
 - `WHISPER_METHOD` Whisperæ¨¡å‹ï¼Œå¯é€‰é¡¹åˆ†åˆ«ä¸ºï¼š`whisper_timestamped`ã€`whisperX`ã€`whisperX_api`, é»˜è®¤`whisperX_api`
 - `DISPLAY_LANGUAGE` æ˜¾ç¤ºè¯­è¨€ï¼Œå¯é€‰`zh_CN`, `zh_TW`, `en_US`, `ja_JP`, é»˜è®¤`auto`
